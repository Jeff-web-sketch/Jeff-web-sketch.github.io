<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pickle Type</title>
<link rel="icon" href="output (2).jpg" type="image/jpeg">
<style>
    body {
        background-color: #e1f5c4;
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    h1 {
        color: #3b6e22;
        margin-top: 20px;
    }
    #countdown {
        font-size: 2rem;
        margin: 20px 0;
    }
    #game {
        font-size: 1.5rem;
        margin: 20px;
    }
    .char {
        padding: 2px;
        border-radius: 3px;
    }
    .current-char {
        background-color: yellow;
    }
    .wrong-char {
        background-color: red;
        color: white;
    }
    #results {
        display: none;
        font-size: 1.5rem;
        margin-top: 20px;
    }
    #playAgain {
        display: none;
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 1rem;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    #playAgain:hover {
        background-color: #45a049;
    }
</style>
</head>
<body>
<h1>ðŸ¥’ Pickle Type ðŸ¥’</h1>
<div id="countdown">3</div>
<div id="game"></div>
<div id="results"></div>
<button id="playAgain">Play Again</button>

<audio id="errorSound" src="https://www.soundjay.com/button/beep-07.wav" preload="auto"></audio>

<script>
const sentences = [
    "Pickles are green crunchy and delicious",
    "Typing fast is the key to winning Pickle Type",
    "The juicy pickle sat on the sandwich waiting to be eaten",
    "Racing against the clock makes Pickle Type intense"
];

let currentSentence = "";
let currentCharIndex = 0;
let correctChars = 0;
let totalChars = 0;
let startTime;
let countdown = 3;
let errorSound = document.getElementById("errorSound");

function startCountdown() {
    document.getElementById("countdown").textContent = countdown;
    const countdownInterval = setInterval(() => {
        countdown--;
        if (countdown > 0) {
            document.getElementById("countdown").textContent = countdown;
        } else {
            clearInterval(countdownInterval);
            document.getElementById("countdown").style.display = "none";
            startGame();
        }
    }, 1000);
}

function startGame() {
    currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
    totalChars = currentSentence.length;
    currentCharIndex = 0;
    correctChars = 0;
    displaySentence();
    startTime = new Date();
    document.addEventListener("keydown", handleTyping);
}

function displaySentence() {
    const gameDiv = document.getElementById("game");
    gameDiv.style.display = "block";
    gameDiv.innerHTML = "";
    for (let i = 0; i < currentSentence.length; i++) {
        const span = document.createElement("span");
        span.textContent = currentSentence[i];
        span.classList.add("char");
        if (i === currentCharIndex) {
            span.classList.add("current-char");
        }
        gameDiv.appendChild(span);
    }
}

function handleTyping(e) {
    if (currentCharIndex >= totalChars) return;

    const expectedChar = currentSentence[currentCharIndex];
    const key = e.key;

    if (key.length === 1) {
        const spans = document.querySelectorAll(".char");
        if (key === expectedChar) {
            spans[currentCharIndex].classList.remove("wrong-char");
            spans[currentCharIndex].classList.remove("current-char");
            correctChars++;
            currentCharIndex++;
            if (currentCharIndex === totalChars) {
                endGame();
                return;
            }
            spans[currentCharIndex].classList.add("current-char");
        } else {
            spans[currentCharIndex].classList.add("wrong-char");
            errorSound.play();
            return;
        }
    }
}

function endGame() {
    const elapsedTime = (new Date() - startTime) / 1000 / 60;
    const wpm = Math.round((correctChars / 5) / elapsedTime);
    const accuracy = Math.round((correctChars / totalChars) * 100);
    document.getElementById("game").style.display = "none";
    document.getElementById("results").style.display = "block";
    document.getElementById("results").textContent =
        `WPM: ${wpm} | Accuracy: ${accuracy}%`;
    document.getElementById("playAgain").style.display = "inline-block";
}

document.getElementById("playAgain").addEventListener("click", () => {
    document.getElementById("results").style.display = "none";
    document.getElementById("playAgain").style.display = "none";
    document.getElementById("countdown").style.display = "block";
    countdown = 3;
    startCountdown();
});

startCountdown();
</script>
</body>
</html>
