<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pickle Type</title>
<link rel="icon" type="image/jpeg" href="output (2).jpg">
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #1b1b1b;
        color: white;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    h1 {
        margin-top: 20px;
        font-size: 40px;
        color: #9acd32; /* pickle green */
    }
    #stats {
        margin-top: 10px;
        font-size: 20px;
        color: #ccc;
    }
    #sentence {
        font-size: 28px;
        margin: 40px auto;
        max-width: 80%;
        line-height: 1.6;
    }
    .correct { color: #9acd32; }
    .incorrect { color: red; }
    .current { background-color: #444; border-radius: 3px; }
    #finishScreen {
        display: none;
        margin-top: 50px;
    }
    button {
        background-color: #9acd32;
        color: black;
        border: none;
        padding: 10px 20px;
        font-size: 18px;
        cursor: pointer;
        border-radius: 6px;
    }
    button:hover {
        background-color: #7ca321;
    }
</style>
</head>
<body>

<h1>ü•í Pickle Type</h1>
<div id="stats">WPM: 0 | Accuracy: 100% | Super Pickle: 1</div>
<div id="sentence"></div>

<div id="finishScreen">
    <h2>üèÅ Finished!</h2>
    <p id="finalStats"></p>
    <button onclick="startGame()">Play Again</button>
</div>

<audio id="wrongSound" src="error-126627.mp3"></audio>
<audio id="bgMusic" src="Pickle man(The greatest of all).mp3" loop></audio>

<script>
const sentences = [
    "Pickles are the crunchy treasures of every sandwich, bringing joy and tangy delight with every bite.",
    "When the great pickle race began, no one expected the briny champion to win in record time.",
    "Typing like a pickle master requires speed, focus, and the determination of a cucumber dreaming of greatness.",
    "In the vast land of jars, only one pickle would be crowned the king of crunch.",
    "Legends say that whoever finishes the pickle race in record time will be granted eternal brine."
];

let currentSentence = "";
let currentIndex = 0;
let startTime, errors = 0, totalChars = 0;
let superPickle = 1;
let bgPlaying = false;

const sentenceDiv = document.getElementById("sentence");
const statsDiv = document.getElementById("stats");
const wrongSound = document.getElementById("wrongSound");
const bgMusic = document.getElementById("bgMusic");
const finishScreen = document.getElementById("finishScreen");
const finalStats = document.getElementById("finalStats");

function startGame() {
    finishScreen.style.display = "none";
    currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
    currentIndex = 0;
    errors = 0;
    totalChars = 0;
    superPickle = 1;
    startTime = null;
    renderSentence();
    updateStats();
}

function renderSentence() {
    let html = "";
    for (let i = 0; i < currentSentence.length; i++) {
        let char = currentSentence[i];
        if (i === currentIndex) {
            html += `<span class="current">${char}</span>`;
        } else {
            html += char;
        }
    }
    sentenceDiv.innerHTML = html;
}

function updateStats() {
    let elapsed = startTime ? (Date.now() - startTime) / 1000 / 60 : 0;
    let wpm = elapsed > 0 ? Math.round((currentIndex / 5) / elapsed) : 0;
    let accuracy = totalChars > 0 ? Math.round(((totalChars - errors) / totalChars) * 100) : 100;
    statsDiv.innerHTML = `WPM: ${wpm} | Accuracy: ${accuracy}% | Super Pickle: ${superPickle}`;
}

document.addEventListener("keydown", (e) => {
    if (!startTime) startTime = Date.now();

    if (e.key === "Enter" && superPickle > 0) {
        // Skip a word
        let spaceIndex = currentSentence.indexOf(" ", currentIndex);
        if (spaceIndex === -1) currentIndex = currentSentence.length;
        else currentIndex = spaceIndex + 1;
        superPickle--;
        renderSentence();
        updateStats();
        return;
    }

    if (e.key.length === 1) {
        totalChars++;
        if (e.key === currentSentence[currentIndex]) {
            currentIndex++;
            if (currentIndex >= currentSentence.length) {
                endGame();
                return;
            }
        } else {
            errors++;
            wrongSound.play();
        }
        renderSentence();
        updateStats();
    }
});

function endGame() {
    let elapsed = (Date.now() - startTime) / 1000 / 60;
    let wpm = Math.round((currentIndex / 5) / elapsed);
    let accuracy = totalChars > 0 ? Math.round(((totalChars - errors) / totalChars) * 100) : 100;
    finalStats.innerHTML = `Final WPM: ${wpm} | Final Accuracy: ${accuracy}% | Errors: ${errors}`;
    finishScreen.style.display = "block";
}

document.body.addEventListener("click", () => {
    if (!bgPlaying) {
        bgMusic.play();
        bgPlaying = true;
    }
});

startGame();
</script>
</body>
</html>
