<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pickle Type</title>
<link rel="icon" href="output (2).jpg" type="image/jpeg">
<style>
body {
    font-family: Arial, sans-serif;
    background-color: #1b1b1b;
    color: #e0e0e0;
    margin: 0;
    padding: 0;
    text-align: center;
}

h1 {
    font-size: 3em;
    margin-top: 20px;
    color: #8bc34a;
}

#countdown {
    font-size: 2em;
    margin: 20px;
}

#game {
    display: none;
    margin-top: 30px;
}

#words {
    font-size: 1.5em;
    max-width: 800px;
    margin: auto;
    text-align: left;
    line-height: 2em;
    background-color: #2c2c2c;
    padding: 20px;
    border-radius: 10px;
    color: #ffffff;
    box-shadow: 0 0 15px #000000;
    user-select: none;
}

.correct { color: #4caf50; }
.incorrect { color: #f44336; }
.current { background-color: #ffeb3b; color: #000; }

#stats {
    margin-top: 20px;
    font-size: 1.2em;
}

#endScreen {
    display: none;
    margin-top: 50px;
}

button {
    padding: 10px 20px;
    font-size: 1.2em;
    background-color: #4caf50;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    margin-top: 10px;
}

button:hover {
    background-color: #388e3c;
}

#musicToggle {
    position: fixed;
    top: 10px;
    right: 10px;
    background-color: #f9a825;
    color: #000;
    padding: 8px 15px;
    border-radius: 5px;
    border: none;
    cursor: pointer;
}

#musicToggle:hover {
    background-color: #fbc02d;
}
</style>
</head>
<body>

<h1>ðŸ¥’ Pickle Type ðŸ¥’</h1>
<div id="countdown"></div>

<div id="game">
    <div id="words"></div>
    <div id="stats">
        WPM: <span id="wpm">0</span> | Accuracy: <span id="accuracy">100</span>% | Super Pickle: <span id="superPickle">1</span>
    </div>
</div>

<div id="endScreen">
    <h2>Game Over!</h2>
    <p>WPM: <span id="finalWpm"></span></p>
    <p>Accuracy: <span id="finalAccuracy"></span>%</p>
    <button onclick="startCountdown()">Play Again</button>
</div>

<button id="musicToggle">Music: On</button>

<audio id="wrongSound" src="wrong-126627.mp3"></audio>
<audio id="bgMusic" src="Pickle man(The greatest of all).mp3" loop></audio>

<script>
const sentences = [
    "Pickles are crunchy and green",
    "Typing fast and accurately wins the pickle crown",
    "The Super Pickle skips a word when you press enter",
    "Racing against the clock makes typing intense",
    "Accuracy is just as important as speed in Pickle Type"
];

let words = [];
let currentWordIndex = 0;
let currentCharIndex = 0;
let correctChars = 0;
let totalChars = 0;
let startTime;
let timer;
let superPickle = 1;
let typedChars = [];

const wrongSound = document.getElementById("wrongSound");
const bgMusic = document.getElementById("bgMusic");
let musicPlaying = true;

document.getElementById("musicToggle").addEventListener("click", () => {
    if (musicPlaying) {
        bgMusic.pause();
        musicPlaying = false;
        document.getElementById("musicToggle").innerText = "Music: Off";
    } else {
        bgMusic.play();
        musicPlaying = true;
        document.getElementById("musicToggle").innerText = "Music: On";
    }
});

function startCountdown() {
    document.getElementById("endScreen").style.display = "none";
    document.getElementById("game").style.display = "block";
    currentWordIndex = 0;
    currentCharIndex = 0;
    correctChars = 0;
    totalChars = 0;
    superPickle = 1;
    typedChars = [];
    words = sentences[Math.floor(Math.random() * sentences.length)].split(" ");
    renderWords();
    document.getElementById("superPickle").innerText = superPickle;

    let countdown = 3;
    document.getElementById("countdown").innerText = countdown;
    let countdownInterval = setInterval(() => {
        countdown--;
        if (countdown > 0) {
            document.getElementById("countdown").innerText = countdown;
        } else {
            clearInterval(countdownInterval);
            document.getElementById("countdown").innerText = "";
            startTime = Date.now();
            timer = setInterval(updateWPM, 1000);
        }
    }, 1000);

    if (musicPlaying) bgMusic.play();
}

function renderWords() {
    let display = "";
    words.forEach((word, i) => {
        if (i === currentWordIndex) {
            let highlightedWord = "";
            for (let j = 0; j < word.length; j++) {
                if (j < typedChars.length) {
                    highlightedWord += `<span class="${typedChars[j] === word[j] ? 'correct' : 'incorrect'}">${word[j]}</span>`;
                } else if (j === currentCharIndex) {
                    highlightedWord += `<span class="current">${word[j]}</span>`;
                } else {
                    highlightedWord += word[j];
                }
            }
            display += `<span>${highlightedWord}</span> `;
        } else {
            display += `<span>${word}</span> `;
        }
    });
    document.getElementById("words").innerHTML = display;
}

document.addEventListener("keydown", (e) => {
    if (document.getElementById("game").style.display === "none") return;

    if (e.key === "Enter" && superPickle > 0) {
        superPickle--;
        currentWordIndex++;
        currentCharIndex = 0;
        typedChars = [];
        document.getElementById("superPickle").innerText = superPickle;
        if (currentWordIndex >= words.length) endGame();
        renderWords();
        return;
    }

    if (e.key.length === 1) {
        totalChars++;
        typedChars[currentCharIndex] = e.key;
        if (e.key === words[currentWordIndex][currentCharIndex]) {
            correctChars++;
            currentCharIndex++;
            if (currentCharIndex >= words[currentWordIndex].length) {
                currentWordIndex++;
                currentCharIndex = 0;
                typedChars = [];
                if (currentWordIndex >= words.length) endGame();
            }
        } else {
            wrongSound.play();
        }
        renderWords();
    } else if (e.key === "Backspace" && currentCharIndex > 0) {
        currentCharIndex--;
        typedChars.pop();
        renderWords();
    }
});

function updateWPM() {
    let elapsedMinutes = (Date.now() - startTime) / 60000;
    let wpm = Math.round((correctChars / 5) / elapsedMinutes);
    let accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
    document.getElementById("wpm").innerText = wpm;
    document.getElementById("accuracy").innerText = accuracy;
}

function endGame() {
    clearInterval(timer);
    document.getElementById("game").style.display = "none";
    document.getElementById("endScreen").style.display = "block";
    document.getElementById("finalWpm").innerText = document.getElementById("wpm").innerText;
    document.getElementById("finalAccuracy").innerText = document.getElementById("accuracy").innerText;
    bgMusic.pause();
}
</script>

</body>
</html>
