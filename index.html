<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pickle Type</title>
<link rel="icon" type="image/jpg" href="output (2).jpg">
<style>
    body {
        background-color: #1e1e1e;
        color: #eee;
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 20px;
    }
    h1 {
        color: #9acd32;
        margin-bottom: 10px;
    }
    #countdown {
        font-size: 2em;
        margin: 20px;
    }
    #gameArea {
        font-size: 24px;
        margin: 30px auto;
        max-width: 800px;
        line-height: 1.5;
    }
    .correct { color: #9acd32; }
    .incorrect { color: #ff4c4c; }
    .current { background-color: #444; padding: 2px 4px; border-radius: 3px; }
    #stats {
        margin-top: 20px;
    }
    #resultScreen {
        display: none;
    }
    button {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #9acd32;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    button:hover {
        background-color: #85b32a;
    }
</style>
</head>
<body>

<h1>ðŸ¥’ Pickle Type</h1>
<div id="countdown">3</div>
<div id="gameArea"></div>
<div id="stats">
    WPM: <span id="wpm">0</span> | Accuracy: <span id="accuracy">100</span>%
</div>

<div id="resultScreen">
    <h2>Race Finished!</h2>
    <p>WPM: <span id="finalWpm"></span></p>
    <p>Accuracy: <span id="finalAccuracy"></span>%</p>
    <p>Time: <span id="finalTime"></span> seconds</p>
    <button onclick="startGame()">Play Again</button>
</div>

<audio id="wrongSound" src="wrong-126627.mp3"></audio>

<script>
let sentences = [
    "The pickle ran away from the sandwich because it wanted freedom.",
    "Pickle juice is surprisingly good for preventing muscle cramps after a workout.",
    "Some people love fried pickles dipped in ranch sauce while others think it's gross.",
    "A super pickle once saved the world from certain doom using only a jar lid."
];
let currentText = "";
let currentIndex = 0;
let correctChars = 0;
let totalTyped = 0;
let wrongSound = document.getElementById("wrongSound");
let startTime;
let timerInterval;
let finished = false;

function countdownStart() {
    document.getElementById("gameArea").innerHTML = "";
    document.getElementById("resultScreen").style.display = "none";
    document.getElementById("countdown").style.display = "block";
    let count = 3;
    document.getElementById("countdown").textContent = count;
    let interval = setInterval(() => {
        count--;
        if (count > 0) {
            document.getElementById("countdown").textContent = count;
        } else {
            clearInterval(interval);
            document.getElementById("countdown").style.display = "none";
            startGame();
        }
    }, 1000);
}

function startGame() {
    currentText = sentences[Math.floor(Math.random() * sentences.length)];
    currentIndex = 0;
    correctChars = 0;
    totalTyped = 0;
    finished = false;
    document.getElementById("gameArea").innerHTML = renderText();
    document.getElementById("stats").style.display = "block";
    document.getElementById("resultScreen").style.display = "none";
    startTime = new Date();
    document.addEventListener("keydown", handleKey);
    timerInterval = setInterval(updateStats, 100);
}

function renderText() {
    return currentText.split("").map((char, i) => {
        if (i < currentIndex) {
            return `<span class="${char === currentText[i] ? 'correct' : 'incorrect'}">${char}</span>`;
        } else if (i === currentIndex) {
            return `<span class="current">${char}</span>`;
        } else {
            return `<span>${char}</span>`;
        }
    }).join("");
}

function handleKey(e) {
    if (finished) return;
    let key = e.key;
    if (key.length === 1) {
        totalTyped++;
        if (key === currentText[currentIndex]) {
            correctChars++;
            currentIndex++;
        } else {
            wrongSound.play();
        }
        if (currentIndex >= currentText.length) {
            endGame();
        }
        document.getElementById("gameArea").innerHTML = renderText();
    }
}

function updateStats() {
    let elapsed = (new Date() - startTime) / 1000 / 60; // in minutes
    let wpm = ((correctChars / 5) / elapsed).toFixed(2);
    let accuracy = ((correctChars / totalTyped) * 100).toFixed(1) || 100;
    document.getElementById("wpm").textContent = wpm;
    document.getElementById("accuracy").textContent = accuracy;
}

function endGame() {
    finished = true;
    clearInterval(timerInterval);
    document.removeEventListener("keydown", handleKey);
    let totalTime = ((new Date() - startTime) / 1000).toFixed(2);
    document.getElementById("finalWpm").textContent = document.getElementById("wpm").textContent;
    document.getElementById("finalAccuracy").textContent = document.getElementById("accuracy").textContent;
    document.getElementById("finalTime").textContent = totalTime;
    document.getElementById("stats").style.display = "none";
    document.getElementById("gameArea").innerHTML = "";
    document.getElementById("resultScreen").style.display = "block";
}

countdownStart();
</script>
</body>
</html>

