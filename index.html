<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nitro Type Style Typing</title>
<style>
    body {
        background-color: #0f0f0f;
        color: #fff;
        font-family: monospace;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        padding-top: 50px;
    }
    #countdown {
        font-size: 3rem;
        margin-bottom: 20px;
    }
    #prompt {
        font-size: 2rem;
        max-width: 800px;
        margin-bottom: 20px;
        line-height: 2.5rem;
        user-select: none;
        white-space: pre-wrap;
    }
    #inputBox {
        width: 800px;
        padding: 10px;
        font-size: 1.5rem;
        border: none;
        outline: none;
        background: #1a1a1a;
        color: #fff;
        border-radius: 5px;
    }
    .correct { color: #00ff00; }
    .wrong { color: #ff5555; }
    #stats { margin-top: 20px; font-size: 1.2rem; }
    #progressBarContainer {
        width: 800px;
        height: 20px;
        background: #333;
        margin-top: 20px;
        border-radius: 10px;
        overflow: hidden;
    }
    #progressBar {
        height: 100%;
        width: 0%;
        background: #00ff00;
        transition: width 0.1s;
    }
    #resetBtn {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 1rem;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        background-color: #ff6600;
        color: white;
    }
</style>
</head>
<body>

<h1>Nitro Type Style Typing</h1>
<div id="countdown"></div>
<div id="prompt"></div>
<input type="text" id="inputBox" placeholder="Wait for countdown..." disabled>
<div id="stats">
    WPM: <span id="wpm">0</span> | Accuracy: <span id="accuracy">100</span>%
</div>
<div id="progressBarContainer">
    <div id="progressBar"></div>
</div>
<button id="resetBtn">Reset</button>

<script>
const prompts = [
    "The quick brown fox jumps over the lazy dog.",
    "Typing fast improves your speed and accuracy.",
    "JavaScript makes websites interactive and fun.",
    "Practice makes perfect for typing skills.",
    "Keep calm and type on like a pro."
];

let currentPrompt = "";
let startTime = null;
let correctIndex = 0; // index of the next correct character
let totalTyped = 0;
let correctTyped = 0;

const countdownDiv = document.getElementById('countdown');
const promptDiv = document.getElementById('prompt');
const inputBox = document.getElementById('inputBox');
const wpmSpan = document.getElementById('wpm');
const accuracySpan = document.getElementById('accuracy');
const progressBar = document.getElementById('progressBar');
const resetBtn = document.getElementById('resetBtn');

function newPrompt() {
    const randomIndex = Math.floor(Math.random() * prompts.length);
    currentPrompt = prompts[randomIndex];
    correctIndex = 0;
    totalTyped = 0;
    correctTyped = 0;
    renderPrompt();
    inputBox.value = "";
    inputBox.disabled = true;
    inputBox.placeholder = "Wait for countdown...";
    countdownDiv.textContent = "";
    startTime = null;
    wpmSpan.textContent = 0;
    accuracySpan.textContent = 100;
    progressBar.style.width = "0%";
    startCountdown();
}

function renderPrompt() {
    let html = "";
    for (let i = 0; i < currentPrompt.length; i++) {
        if (i < correctIndex) {
            html += `<span class="correct">${currentPrompt[i]}</span>`;
        } else {
            html += `<span>${currentPrompt[i]}</span>`;
        }
    }
    promptDiv.innerHTML = html;
}

function startCountdown() {
    let count = 3;
    countdownDiv.textContent = count;
    const interval = setInterval(() => {
        count--;
        if (count > 0) {
            countdownDiv.textContent = count;
        } else {
            countdownDiv.textContent = "Go!";
            inputBox.disabled = false;
            inputBox.placeholder = "Start typing...";
            inputBox.focus();
            clearInterval(interval);
            setTimeout(() => countdownDiv.textContent = "", 1000);
        }
    }, 1000);
}

inputBox.addEventListener('input', (e) => {
    if (!startTime) startTime = new Date();

    const lastChar = e.data; // the last character typed
    if (!lastChar) return; // handle backspace or delete (ignore)

    totalTyped++;

    if (lastChar === currentPrompt[correctIndex]) {
        correctTyped++;
        correctIndex++;
        renderPrompt();
    }

    const accuracy = totalTyped === 0 ? 100 : Math.round((correctTyped / totalTyped) * 100);
    accuracySpan.textContent = accuracy;

    const elapsedMinutes = (new Date() - startTime) / 60000;
    const wpm = elapsedMinutes > 0 ? Math.round((correctTyped / 5) / elapsedMinutes) : 0;
    wpmSpan.textContent = wpm;

    const progressPercent = Math.min((correctIndex / currentPrompt.length) * 100, 100);
    progressBar.style.width = progressPercent + "%";

    if (correctIndex >= currentPrompt.length) {
        inputBox.disabled = true;
    }

    // clear the input box so user can keep typing next char
    inputBox.value = "";
});

resetBtn.addEventListener('click', newPrompt);

// Initialize
newPrompt();
</script>

</body>
</html>
