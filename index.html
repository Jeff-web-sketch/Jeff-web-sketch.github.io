<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nitro Type Style Typing Race</title>
<style>
    body {
        background-color: #0f0f0f;
        color: #fff;
        font-family: monospace;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        padding-top: 50px;
        user-select: none;
    }
    #countdown {
        font-size: 3rem;
        margin-bottom: 20px;
    }
    #prompt {
        font-size: 2rem;
        max-width: 800px;
        margin-bottom: 30px;
        line-height: 2.5rem;
        white-space: pre-wrap;
    }
    .correct { color: #00ff00; }
    #stats { margin-top: 20px; font-size: 1.2rem; }
    #track {
        width: 800px;
        height: 50px;
        background: #333;
        border-radius: 25px;
        margin-top: 30px;
        position: relative;
        overflow: hidden;
    }
    #car {
        width: 50px;
        height: 50px;
        background-color: #ff6600;
        border-radius: 50%;
        position: absolute;
        left: 0;
        top: 0;
        transition: left 0.05s linear;
    }
    #resetBtn {
        margin-top: 30px;
        padding: 10px 20px;
        font-size: 1rem;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        background-color: #ff6600;
        color: white;
    }
</style>
</head>
<body>

<h1>Nitro Type Style Typing Race</h1>
<div id="countdown"></div>
<div id="prompt"></div>
<div id="stats">
    WPM: <span id="wpm">0</span> | Accuracy: <span id="accuracy">100</span>%
</div>
<div id="track">
    <div id="car"></div>
</div>
<button id="resetBtn">Reset</button>

<script>
const prompts = [
    "The quick brown fox jumps over the lazy dog.",
    "Typing fast improves your speed and accuracy.",
    "JavaScript makes websites interactive and fun.",
    "Practice makes perfect for typing skills.",
    "Keep calm and type on like a pro."
];

let currentPrompt = "";
let correctIndex = 0;
let totalTyped = 0;
let correctTyped = 0;
let startTime = null;

const countdownDiv = document.getElementById('countdown');
const promptDiv = document.getElementById('prompt');
const wpmSpan = document.getElementById('wpm');
const accuracySpan = document.getElementById('accuracy');
const car = document.getElementById('car');
const track = document.getElementById('track');
const resetBtn = document.getElementById('resetBtn');

function newPrompt() {
    const randomIndex = Math.floor(Math.random() * prompts.length);
    currentPrompt = prompts[randomIndex];
    correctIndex = 0;
    totalTyped = 0;
    correctTyped = 0;
    startTime = null;
    renderPrompt();
    wpmSpan.textContent = 0;
    accuracySpan.textContent = 100;
    car.style.left = "0px";
    countdownDiv.textContent = "";
    startCountdown();
}

function renderPrompt() {
    let html = "";
    for (let i = 0; i < currentPrompt.length; i++) {
        if (i < correctIndex) html += `<span class="correct">${currentPrompt[i]}</span>`;
        else html += `<span>${currentPrompt[i]}</span>`;
    }
    promptDiv.innerHTML = html;
}

function startCountdown() {
    let count = 3;
    countdownDiv.textContent = count;
    const interval = setInterval(() => {
        count--;
        if (count > 0) countdownDiv.textContent = count;
        else {
            countdownDiv.textContent = "Go!";
            clearInterval(interval);
            setTimeout(() => countdownDiv.textContent = "", 1000);
            document.addEventListener('keydown', handleTyping);
        }
    }, 1000);
}

function handleTyping(e) {
    if (!startTime) startTime = new Date();

    const char = e.key;
    if (char.length > 1) return; // ignore keys like Shift, Arrow, etc.

    totalTyped++;

    if (char === currentPrompt[correctIndex]) {
        correctTyped++;
        correctIndex++;
        renderPrompt();
        updateCar();
    }

    const accuracy = totalTyped === 0 ? 100 : Math.round((correctTyped / totalTyped) * 100);
    accuracySpan.textContent = accuracy;

    const elapsedMinutes = (new Date() - startTime) / 60000;
    const wpm = elapsedMinutes > 0 ? Math.round((correctTyped / 5) / elapsedMinutes) : 0;
    wpmSpan.textContent = wpm;

    if (correctIndex >= currentPrompt.length) {
        document.removeEventListener('keydown', handleTyping);
    }
}

function updateCar() {
    const percent = correctIndex / currentPrompt.length;
    const trackWidth = track.offsetWidth - car.offsetWidth;
    car.style.left = (percent * trackWidth) + "px";
}

resetBtn.addEventListener('click', newPrompt);

// Start
newPrompt();
</script>

</body>
</html>
